{% for taxon in listTaxons %}
    <li id="taxonListItem"
        class="d-flex border-bottom p-2
                {% if (configuration.AFFICHAGE_MENACE and taxon.menace) %} border border-danger bg-danger-subtle
                {% endif %}"
        id="taxonListItem" 
        area-code="{{ id_area }}"
        cdRef="{{ taxon.cd_ref }}"
        {% if configuration.INTERACTIVE_MAP_LIST %}
        data-bs-toggle="tooltip" 
        title="{{ _('display.municipality.obs') }}"
        {% endif %}>

        <span class="d-none">{{ taxon.group2_inpn }}</span>

        <div class="pictoImgList me-2" data-bs-toggle="tooltip" title="{{ taxon.group2_inpn }}" data-bs-placement="right">
            <img class="pictoImgList" loading="lazy" src="{{taxon.media}}" alt="">
        </div>

        <div class="flex-grow-1">

        <span class="float-end">
            {% if configuration.PROTECTION %}
                {% if taxon.protection_stricte %}
                    <a href="https://inpn.mnhn.fr/espece/cd_nom/{{ taxon.cd_ref }}/tab/statut" target="_blank">
                        <img src="{{ url_for('static', filename='images/logo_protection.png') }}"
                             style="width: 30px; height: 30px"
                             data-bs-placement="left" data-bs-toggle="tooltip"
                             title="{{ _('this.taxon.has.a.protected.status') }}" alt=" " />
                    </a>
                {% endif %}
            {% endif %}

            {% if configuration.DISPLAY_PATRIMONIALITE %}
                    <img src="{{ url_for('static', filename=configuration.PATRIMONIALITE_ICON) }}"
                         style="width: 30px; height: 30px"
                         data-bs-placement="left" data-bs-toggle="tooltip"
                         title="{{ _('this.taxa.is.patrimonial') }}"
                         alt=" " />
            {% endif %}
            {% if configuration.AFFICHAGE_MENACE %}
                {% set
                    THREAT_LABELS = {
                        'CR*': _('threatened.CR'),
                        'CR': _('threatened.CR'),
                        'EN': _('threatened.EN'),
                        'VU': _('threatened.VU'),
                    }
                %}
                {% set
                    THREAT_LEVEL = {
                        'LRR': _('protected.LRR'),
                        'LRN': _('protected.LRN'),
                        'LRE': _('protected.LRE'),
                        'LRM': _('protected.LRM'),
                    }
                %}
                {% if taxon.menace %}
                    <img src="{{ url_for('static', filename='images/picto_menace.png') }}"
                         alt="{{ _('threatened') }}"
                         style="width:30px; height:30px;"
                         data-bs-toggle="tooltip"
                         title="{{ THREAT_LABELS.get(taxon.menace) }} - THREAT_LEVEL.get(taxon.niveau_application_menace)" />
                {% endif %}
            {% endif %}
        </span>

            <h5 class="mt-0 mb-1">
                <strong>
                    {% if taxon.nom_vern == None %}
                        -
                    {% else %}
                        {{ taxon.nom_vern.split(',')[0].strip() }}
                    {% endif %}
                </strong>
            </h5>

            <h5>
                <span id="name">{{ taxon.nom_complet_html | safe }}</span>
            </h5>

            <strong>{{ taxon.nb_obs }}</strong>
            {% if taxon.nb_obs == 1 %}{{ _('observation') | lower }}{% else %}{{ _('observations') | lower }}{% endif %}
            <br>

            {{ _('last.obs.in') }} <strong>{{ taxon.yearmax | int }}</strong>

            <span class="float-end">
            <a class="badge bg-primary text-decoration-none" href="{{ url_for('main.ficheEspece', cd_nom=taxon.cd_ref) }}"
               data-bs-toggle="tooltip"
               title="{{ _('check.species.sheet') }}"
               data-bs-placement="left">
                <i class="fas fa-list fa-fw"></i> {{ _('species.sheet') }}
            </a>
        </span>

        </div>
    </li>
{% endfor %}
