<!doctype html>
{% if configuration.MULTILINGUAL %}
<html lang='{{ g.lang_code }}'>
{% else %}
<html lang='{{ configuration.DEFAULT_LANGUAGE }}'>
{% endif %}
<head>
    <base href="{{ configuration.URL_APPLICATION }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}{% endblock %} | {{ configuration.NOM_APPLICATION }} - {{ configuration.STRUCTURE }}</title>
    {% include "templates/core/assets_header.html" %}

    <!-- Additional assets -->
    {% block additionalHeaderAssets %}{% endblock %}

    <link rel="stylesheet" href="{{ url_for('static', filename='custom/custom.css') }}"/>
    
    <!-- Add all translations in windows.i18n -->
    <script>
        window.i18n = {{ translations|tojson|safe }};
    </script>
    {% block metaTags %}{% endblock %}
</head>

<body page-name="{{ page_name }}">

<header id="navbar">
    {% include "static/custom/templates/navbar.html" %}
</header>

<sidebar id="sideBar">
    {% include 'templates/core/sideBar.html' %}
</sidebar>

<main class="d-flex">

    <div class="container-fluid" id="page">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div id="message">
                        <div id="inner-message"
                             class="alert alert-warning alert-dismissible fade show position-fixed end-0 top-0 m-3"
                             role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}

    </div>
</main>

{% if configuration.AFFICHAGE_FOOTER %}
    <footer>
        {% include 'static/custom/templates/footer.html' %}
    </footer>
{% endif %}

</body>

{% include "templates/core/assets_footer.html" %}

<script>
    {% for type in areas_type_search %}
        $("#searchAreas{{ type.type_code.lower().capitalize() }}").focus(function () {
            autocompleteSearch("#searchAreas{{ type.type_code.lower().capitalize() }}", "{{ type.type_code }}", 10);
        });
    {% endfor %}
</script>

{% block additionalFooterAssets %}{% endblock %}

</html>