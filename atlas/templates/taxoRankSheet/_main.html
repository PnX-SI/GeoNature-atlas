{% extends "templates/core/layout.html" %}

{% block title %}
    {# Personnalisez ici le titre de la page (celui qui est affiché dans l'onglet du navigateur) #}
    {{ referenciel.lb_nom }} ({{ referenciel.nom_rang }})
{% endblock %}

{% block metaTags %}
    {# Ajoutez ici les balises méta utilisées pour le SEO #}
{% endblock %}

{% block additionalFooterAssets %}
    {# Ajoutez ici les assets complémentaires qui seront en bas de page #}
    <script type="text/javascript">
        var configuration = {{ configuration | tojson }};
    </script>

{% endblock %}

{% block content %}
    {# Ajoutez ici coeur de la page #}

    <div class="row h-100 flex-grow-1 p-0 m-0 border-bottom">
        <div class="col-12 d-flex flex-column m-0 p-0">
            <div class="bg-light text-center border-bottom border-end p-2">
                <h4>
                    <b>{{ _('species.obs.for.tax') }} <i>{{ referenciel.lb_nom }}</i> ({{ referenciel.nom_rang }})</b>
                </h4>

                <div id="hierarchy">
                    {% for taxon in taxonomyHierarchy %}
                        {{ taxon.nom_rang }} :
                        <i>
                            {% if taxon.tri_rang >= configuration.LIMIT_FICHE_LISTE_HIERARCHY %}
                                <a href="{{ url_for('main.ficheEspece', cd_nom=taxon.cd_ref) }}"><i>{{ taxon.lb_nom }}</i></a>
                            {% else %}
                                <a href="{{ url_for('main.ficheRangTaxonomie', cd_ref=taxon.cd_ref) }}"><i>{{ taxon.lb_nom }}</i></a>
                            {% endif %}
                        </i>
                        {% if not loop.last %}
                            <span class="fas fa-chevron-right"></span>
                        {% endif %}
                    {% endfor %}
                </div>

                {% include 'templates/core/statHierarchy.html' %}
            </div>
                {% with context={"page": "liste" ,"page_param": cd_ref } %}
                    {% include 'templates/core/listTaxons.html' %}
                {% endwith %}
        </div>
    </div>
{% endblock %}