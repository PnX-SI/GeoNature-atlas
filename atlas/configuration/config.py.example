# -*- coding:utf-8 -*-

#########################################
## Exemple de fichier de configuration ##
#########################################


# Connexion de l'application à la BDD (avec l'utilisateur `user_pg` renseigné dans le `settings.ini`)
SQLALCHEMY_DATABASE_URI = "postgresql://geonatatlas:monpassachanger@localhost:5432/geonatureatlas"

# Ce paramètre avancé permet de configurer la connexion de SQLAlchemy avec la base de données.
# Ne l'utiliser que si vous savez ce que vous faite !
# Les paramètres de configuration de la connexion doivent correspondre à ceux utilisé dans la fonction `create_engine`
# de SQLAlchemy : https://docs.sqlalchemy.org/en/14/core/engines.html#sqlalchemy.create_engine
# Ci-dessous un exemple de paramètre à adapter selon votre serveur et besoins :
SQLALCHEMY_ENGINE_OPTIONS = {
    "pool_recycle": 30,
    "pool_size": 35,
    "pool_timeout": 30,
    "pool_pre_ping": True,
    "pool_use_lifo": True,
    "connect_args": {
        "connect_timeout": 10,
        "application_name": "atlas",
        "keepalives": 1,
        "keepalives_idle": 30,
        "keepalives_interval": 10,
        "keepalives_count": 5,
    },
}

# Port sur lequel tourne le serveur gunicorn
GUNICORN_PORT = 8080

# Recharger automatiquement les templates
TEMPLATES_AUTO_RELOAD = False

#########################################
#########################################
### Personnalisation de l'application ###
#########################################
#########################################

# Nom de la structure
STRUCTURE = "Nom de la structure"

# Nom de l'application
NOM_APPLICATION = "Nom de l application"

# URL de l'application depuis la racine du domaine
# ex "/atlas" pour une URL: http://mon-domaine/atlas OU "" si l'application est accessible à la racine du domaine
URL_APPLICATION = "/atlas"

#################################
#################################
###### Modules activation #######
#################################
#################################

# Enable organism module : organism sheet +  organism participation on species sheet and area sheet
ORGANISM_MODULE = False

# Shows the names of the observers in the species sheet
DISPLAY_OBSERVERS = True

###########################
###### Multilingual #######
###########################

# Default language, also used when multilingual is disabled
DEFAULT_LANGUAGE = 'fr'

# Activate multilingual
MULTILINGUAL = False

# Available languages
# Don't delete, even if you disable MULTILINGUAL
# You need to add your own default language (DEFAULT_LANGUAGE) here if it's not present
# Check documentation to add another language
LANGUAGES = {
    'en': {
        'name' : 'English',
        'flag_icon' : 'flag-icon-gb',
        'months' : ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
        },
    'fr': {
        'name' : 'Français',
        'flag_icon' : 'flag-icon-fr',
        'months' : ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre']
        },
    'it': {
        'name' : 'Italiano',
        'flag_icon' : 'flag-icon-it',
        'months' : ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre']
        }
}

#####################
#####################
### Configuration ###
#####################
#####################

# Utiliser et afficher le glossaire (static/custom/glossaire.json.sample)
GLOSSAIRE = False

# Afficher le lien vers la galerie photo
AFFICHAGE_GALERIE_PHOTO = True

###########################
###### Cartographie #######
###########################

# Configuration des cartes (centre du territoire, couches CARTE et ORTHO, échelle par défaut...)
MAP = {
    'LAT_LONG': [44.7952, 6.2287],
    'FIRST_MAP': {
            'url' : 'https://wxs.ign.fr/IGNKEY/wmts?LAYER=GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&EXCEPTIONS=text/xml&FORMAT=image/jpeg&SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}',
            'attribution' : '&copy; <a href="http://www.ign.fr/">IGN</a>',
            'tileName' : 'IGN'
    },
    'SECOND_MAP' : {
            'url' :'https://wxs.ign.fr/IGNKEY/wmts?LAYER=ORTHOIMAGERY.ORTHOPHOTOS&EXCEPTIONS=text/xml&FORMAT=image/jpeg&SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}',
            'attribution' : '&copy; <a href="http://www.ign.fr/">IGN</a>',
            'tileName' : 'Ortho IGN'
    },
    'ZOOM' : 10,
    'MIN_ZOOM' : 6,
    'MAX_BOUNDS' : [[41.463,-1.876],[51.62,8.6]],
    # Pas du slider sur les annees d'observations: 1 = pas de 1 an sur le slider
    'STEP': 1,
    # Couleur et épaisseur des limites du territoire
    'BORDERS_COLOR': '#000000',
    'BORDERS_WEIGHT': 3,
    # Permet de générer un masque autour du territoire
    # Pour activer mettre fill à True
    'MASK_STYLE': {
                    "fill": False,
                    "fillColor": '#020202',
                    "fillOpacity": 0.3
                   },
    'ENABLE_SLIDER': True,
    'ENABLE_SCALE': True
}

# Affichage des observations par maille ou point
# True = maille / False = point
AFFICHAGE_MAILLE = False

# Si affichage en mailles, il est possible de surcharger certains elements dans le selecteur de couche.
AFFICHAGE_COUCHES_MAP = {
    "M1": {
        "label": "Mailles 1 km",
        "selected": True,
        "fillOpacity": 0.4,
        "fillOpacityHover": 0.4,
        "weight": 1,
        "weightHover": 2,
        "strokeOpacity": 0.75,
        "strokeColor": "black",
        "strokeColorHover": "green"
    },
    "COM": {
        "label": "Mailles communes",
        "selected": False,
        "fillOpacity": 0.2
    },
    "M10": {
        "label": "Mailles 10 km",
        "selected": False,
        "fillOpacity": 0.6
    }
}

# Niveau de zoom à partir duquel on passe à l'affichage en point (si AFFICHAGE_MAILLE = False)
ZOOM_LEVEL_POINT = 11

# Limite du  nombre d'observations à partir duquel on passe à l'affichage en cluster
LIMIT_CLUSTER_POINT = 1000

# Carte de la page d'accueil: observations des 'x' derniers jours. Bien mettre en anglais et non accordé
NB_DAY_LAST_OBS = '7'

# Texte à afficher pour décrire la cartographie des 'dernières observations'
TEXT_LAST_OBS = 'Les observations des agents ces 7 derniers jours |'

# Carte de la fiche "area" : nombre des 'x' dernières observations affichées
NB_LAST_OBS=100

###########################
###### PAGE ACCUEIL #######
###########################

# Bloc d'introduction presentant l'atlas. Affichage True/False
AFFICHAGE_INTRODUCTION = True

# Afficher le Footer sur toutes les pages (static/custom/templates/footer.html)
AFFICHAGE_FOOTER = True

# Afficher le lien "données personnelles" dans le footer
AFFICHAGE_RGPD = False

# Bloc de statistiques globales. Affichage True/False
AFFICHAGE_STAT_GLOBALES = True

# Bloc avec carte et liste des dernières observations. Affichage True/False
AFFICHAGE_DERNIERES_OBS = True

# Bloc avec espèces à voir en ce moment. Affichage True/False
AFFICHAGE_EN_CE_MOMENT = True

# Bloc dernières espèces découvertes. Affichage True/False
AFFICHAGE_NOUVELLES_ESPECES = True

## BLOC STAT PAR RANG : Parametre pour le bloc statistique 2 de la page d'accueil (statistiques par rang remontant 2 espèces aléatoirement ayant au moins une photo)
# Ce bloc peut être affiché ou non et peut être affiché sur 2, 3 ou 4 colonnes. Il est ainsi possible de mettre autant de blocs que souhaité (2, 3, 4, 6, 8...)
# Mettre dans RANG_STAT le couple 'rang taxonomique' - 'nom du taxon correspondant au rang' pour avoir des statistique sur ce rang -
# Fonctionne à tous les niveaux de rang présents dans la table taxref -

# Exemple RANG_STAT = [{'ordre': ['Lepidoptera']}, {'classe': ['Insecta', 'Arachnida']}]
#         RANG_STAT_FR ['Papillon', 'Insecte et Araignées']

AFFICHAGE_RANG_STAT = True
COLONNES_RANG_STAT = 3
RANG_STAT = [{'phylum': ["Arthropoda", "Mollusca", "Annelida", "Cnidaria", "Platyhelminthes"]}, {'phylum': ["Chordata"]}, {'regne': ["Plantae"]}]
RANG_STAT_FR = ['Faune invertébrée', 'Faune vertébrée', 'Flore']

############################
####### FICHE ESPÈCE #######
############################

# Afficher le graphique des altitudes. Affichage True/False
AFFICHAGE_GRAPH_ALTITUDES = True

# Afficher le graphique de la phénologie. Affichage True/False
AFFICHAGE_GRAPH_PHENOLOGIE = True

# couleurs des diagrames circulaires (provenance des données par organismes et groupes taxonomiques - fiche espèce et zonage)
COLOR_PIE_CHARTS = [
    "#981D97",
    "#FBFFB9",
    "#FDD692",
    "#EC7357",
    "#754F44",
    "#FB6376",
    "#B7ADCF",
    "#DEE7E7",
    "#F4FAFF",
    "#383D3B",
    "#7C7C7C",
    "#B5F44A",
    "#D6FF79",
    "#507255",
    "#381D2A",
    "#BA5624",
    "#FFA552",
    "#F7FFE0",
    "#49C6E5",
    "#54DEFD",
    "#0B5563",
    "#54DEFD",
]
# Afficher les statuts de conservation. Affichage True/False
AFFICHAGE_STATUTS = True

# Configure quels statuts de protection sont affichés et dans quel ordre.
# - il est possible de définir plusieurs filters pour un groupe (pour grouper les listes rouges et les marqueurs znieff d'une même zone par exemple).
# - 'label' du groupe sera affiché devant l'ensemble des statuts de ce groupe. 'label' est optionnel.
# - les valeurs des propriétés `cd_type_statut` et `cd_sig` correspondent aux valeurs présentes dans la BDD `atlas.vm_bdc_statut`.
GROUPES_STATUTS = [
    {
        "label": "Monde",
        "filters": [
            {"cd_type_statut": "LRM", "cd_sig": "WORLD"}
        ]
    },
    {
        "label": "Europe",
        "filters": [
            {"cd_type_statut": "LRE", "cd_sig": "EUROPE"}
        ]
    },
    {
        "label": "France métropolitaine",
        "filters": [
            {"cd_type_statut": "LRN", "cd_sig": "TERFXFR"}
        ]
    },
    {
        "label": "Région",
        "filters": [
            {"cd_type_statut": "LRR", "cd_sig": "<votre code région>"}  # par exemple "INSEER52"
        ]
    },
    {
        "filters": [
            {"cd_type_statut": "ZDET", "cd_sig": "<votre code département>"}  # par exemple "INSEED44"
        ]
    }
]

# Rang taxonomique qui fixe jusqu'à quel taxon remonte la filiation taxonomique (hierarchie dans la fiche d'identite : Famille, Ordre etc... )
LIMIT_RANG_TAXONOMIQUE_HIERARCHIE = 13

# Rang taxonomique qui fixe la limite de l'affichage de la fiche espèce ou de la liste
# 35 = ESPECE
# On prend alors tout ce qui est inferieur ou egal a l'espèce pour faire des fiches et ce qui est superieur pour les listes
LIMIT_FICHE_LISTE_HIERARCHY = 28

# URL d'accès aux photos et autres médias (URL racine). Dans la vm_medias, il est uniquement stocké le nom du fichier. Il est donc necessaire de préciser l'URL de stockage des médias, pour construire le chemin complet d'accès à l'image. Par exemple l'url d'accès à Taxhub.
# Si vous utilisez GeoNature: REMOTE_MEDIAS_URL = "https://<URL_GEONATURE>/api/media/taxhub/"
REMOTE_MEDIAS_URL = "https://<URL_GEONATURE>/api/media/taxhub/"

# URL de TaxHub (pour génération à la volée des vignettes des images).
# Si le service Taxhub n'est pas utilisé, commenter la variable
REDIMENSIONNEMENT_IMAGE = True

# URL de Taxhub : necessaire pour le redimensionnement des images
# Si vous utilisez GeoNature: TAXHUB_URL "https://<URL_GEONATURE>/api/taxhub"
TAXHUB_URL = "https://<URL_GEONATURE>/api/taxhub"

#### LISTE DES CODES DES ATTRIBUTS DESCRIPTIFS DES TAXONS DE LA TABLE "taxonomie.bib_attributs"
# Un onglet sera affiché dans le bloc "Informations espèces" de la fiche espèce
# pour chaque code d'attribut indiqué dans la liste ci-dessous.
# L'onglet n'est affiché que s'il possède du contenu.
# L'ordre des onglets correspond à l'ordre des codes dans la liste.
TAXHUB_DISPLAYED_ATTR=["atlas_description", "atlas_commentaire", "atlas_milieu", "atlas_chorologie"]

#### ID DES TYPES DE MEDIAS DE LA TABLE vm_medias
ATTR_MAIN_PHOTO = 1
ATTR_OTHER_PHOTO = 2
ATTR_LIEN = 3
ATTR_PDF = 4
ATTR_AUDIO = 5
ATTR_VIDEO_HEBERGEE = 6
ATTR_YOUTUBE = 7
ATTR_DAILYMOTION = 8
ATTR_VIMEO = 9

# Coupe le nom_vernaculaire à la 1ere virgule sur les fiches espèces
SPLIT_NOM_VERN = True

# Permet de définir des types de médias TaxHub comme « Liens importants » de la fiche taxon.
# Les liens importants sont mis en avant dans l'affichage de la fiche.
# - `type_media_id` : l'ID d'un type de média définit dans l'instance TaxHub.
# - `icon` (optionnel) : l'URL d'une image à ajouter sur le bouton du lien.
#
# Une classe CSS `lien-important-type-XX` est ajoutée sur l'élément HTML du lien avec XX l'ID du type
# de média. Cela permet de personnaliser l'apparence des liens, par type, dans `custom.css`.
#
# Exemple de configuration :
# (les types médias et les icones sont des exemples et n'existent pas de base
# sur une instance Atlas/TaxHub)
TYPES_MEDIAS_LIENS_IMPORTANTS = [
  {
    'type_media_id': 10,  # Lien participation campagne d'observation
    'icon': '/static/custom/images/jumelles.svg'
  },
  {
    'type_media_id': 11,  # Lien vers fiche focus territoire
    'icon': '/static/custom/images/logo_fiche_focus.png'
  }
]


############################################
#### FICHE "AREA" ET RANG TAXONOMIQUE  #####
############################################

# Permet d'afficher ou non les colonnes Protection et/ou Patrimonialité/Enjeux dans les listes de taxons
# Se basent sur les champs "atlas.vm_taxons.protection_stricte"` (oui/non) et "atlas.vm_taxons.patrimonial"

# Afficher ou non la colonne Protection dans les listes de taxons (basé sur le champs "protection_stricte")
PROTECTION = True

# Afficher ou non la colonne Patrimonialité dans les listes de taxons (basé sur le champs "patrimonial") et la customiser
# Pour masquer cette colonne, passer uniquement le paramètre à "False"
DISPLAY_PATRIMONIALITE = False

# Pour customiser l'affichage de cette colonne (label affiché, valeurs du champs et leur affichage) :
PATRIMONIALITE = {
    'label': "Patrimoniale",
    'label_pluriel': "Patrimoniales",
    'config': {
        'oui': {
            'icon': 'custom/images/logo_patrimonial.png',
            'text': "Ce taxon est patrimonial"
        }
    }
}

# Liste des type de territoire pour les fiches territoires (code bib_area_type)
# ex : TYPE_TERRITOIRE_SHEET = ['COM', 'EPCI']
TYPE_TERRITOIRE_SHEET = []

# Affiche ou non la barre "tout le territoire" sur les graphiques
# du nombre d'espèce des fiches zonages
AFFICHAGE_TOUT_TERRITOIRE_GRAPH = False

# Liste des application dont "orejime" controle la dépose de cookie
OREJIME_APPS = []

# Traductions orejime (voir la doc cookie et RGPD pour comment le remplir)
OREJIME_TRANSLATIONS = {}

#############################
#### Lien custom du logo ####
#############################

CUSTOM_LOGO_LINK='https://monadressecustom.org'

#############################
#### Pages statistiques #####
#############################

# Permet de lister les pages statiques souhaitées et de les afficher dynamiquement dans le menu sidebar
# Pour ajouter un lien vers une page externe, il faut renseigner l'attribut "url" ; pour une page interne, il faut renseigner l'attribut "template"
# Pour choisir un picto font-awesome 5, il faut renseigner l'attribut "picto" ; pour utiliser un picto stocké dans 'static/custom/images', il faut renseigner son nom de fichier dans l'attribut "customized_picto"
STATIC_PAGES = {
    'presentation': {'template': 'static/custom/templates/presentation.html', 'title': "Présentation de l'atlas", 'picto': 'fa-question-circle', 'order': 0},
    'pne': {'url':'https://www.ecrins-parcnational.fr/', 'title': "Parc national des Ecrins", 'customized_picto': 'sample.external-website.png', 'picto_height': 16, 'order': 1}
}

####################################
####################################
#### Configuration de sécurité #####
####################################
####################################

SECRET_KEY = '282799166744079489444397'
